# Python modules that are imported to find
# stage classes.  Any stages imported in these
# modules are automatically detected and their names can
# be used below
modules: bbpower


# The launcher to use
# These are defined in bbpipe/sites
launcher: local


# The list of stages to run and the number of processors
# to use for each.
stages:
    - name: BBCompSep
      nprocess: 1
    - name: BBPlotter
      nprocess: 1

# Definitions of where to find inputs for the overall pipeline.
# Any input required by a pipeline stage that is not generated by
# a previous stage must be defined here.  They are listed by tag.
inputs:
    # This is the file containing the data power spectra,
    # covariance and other metadata (window functions, bandpasses,
    # beams etc.).
    cells_coadded: ./test/test_out/cls_coadd.fits
    # This contains a fiducial power spectrum for a model that
    # roughly resembles the data. This is needed for the
    # Hamimeche and Lewis (H&L) likelihood. If you're not using that,
    # you can put garbage here.
    cells_fiducial: ./test/test_out/cls_fid.fits
    # This contains the noise power spectrum. Only needed for
    # H&L.
    cells_noise: ./test/test_out/cls_coadd.fits
    # Null power spectra. Not really needed if you only care about
    # the likelihood part of the pipeline. Otherwise it should
    # contain a set of power spectrum combinations that should
    # be compatible with zero.
    cells_null: ./test/test_out/cls_coadd.fits
    # Power spectra computed by coadding all the different data
    # splits (including auto-correlations). As above, ignore this
    # if you only care about the likelihood part of the pipeline.
    cells_coadded_total: ./test/test_out/cls_coadd.fits

# Overall configuration file describing the options for
# the different pipeline stages.
config: ./test/test_config_sampling.yml

# If all the outputs for a stage already exist then do not re-run that stage
resume: False

# Put all the output files in this directory:
output_dir: ./test/test_out

# Put the logs from the individual stages in this directory:
log_dir: ./test/test_out

# Put the log for the overall pipeline infrastructure in this file:
pipeline_log: ./test/test_out/log.txt
